--- Day 14: Restroom Redoubt ---
One of The Historians needs to use the bathroom; fortunately, you know there's a bathroom near an unvisited location on their list, and so you're all quickly teleported directly to the lobby of Easter Bunny Headquarters.

Unfortunately, EBHQ seems to have "improved" bathroom security again after your last visit. The area outside the bathroom is swarming with robots!

To get The Historian safely to the bathroom, you'll need a way to predict where the robots will be in the future. Fortunately, they all seem to be moving on the tile floor in predictable straight lines.

You make a list (your puzzle input) of all of the robots' current positions (p) and velocities (v), one robot per line. For example:

p=0,4 v=3,-3
p=6,3 v=-1,-3
p=10,3 v=-1,2
p=2,0 v=2,-1
p=0,0 v=1,3
p=3,0 v=-2,-2
p=7,6 v=-1,-3
p=3,0 v=-1,-2
p=9,3 v=2,3
p=7,3 v=-1,2
p=2,4 v=2,-3
p=9,5 v=-3,-3
Each robot's position is given as p=x,y where x represents the number of tiles the robot is from the left wall and y represents the number of tiles from the top wall (when viewed from above). So, a position of p=0,0 means the robot is all the way in the top-left corner.

Each robot's velocity is given as v=x,y where x and y are given in tiles per second. Positive x means the robot is moving to the right, and positive y means the robot is moving down. So, a velocity of v=1,-2 means that each second, the robot moves 1 tile to the right and 2 tiles up.

The robots outside the actual bathroom are in a space which is 101 tiles wide and 103 tiles tall (when viewed from above). However, in this example, the robots are in a space which is only 11 tiles wide and 7 tiles tall.

The robots are good at navigating over/under each other (due to a combination of springs, extendable legs, and quadcopters), so they can share the same tile and don't interact with each other. Visually, the number of robots on each tile in this example looks like this:

1.12.......
...........
...........
......11.11
1.1........
.........1.
.......1...
These robots have a unique feature for maximum bathroom security: they can teleport. When a robot would run into an edge of the space they're in, they instead teleport to the other side, effectively wrapping around the edges. Here is what robot p=2,4 v=2,-3 does for the first few seconds:

Initial state:
...........
...........
...........
...........
..1........
...........
...........

After 1 second:
...........
....1......
...........
...........
...........
...........
...........

After 2 seconds:
...........
...........
...........
...........
...........
......1....
...........

After 3 seconds:
...........
...........
........1..
...........
...........
...........
...........

After 4 seconds:
...........
...........
...........
...........
...........
...........
..........1

After 5 seconds:
...........
...........
...........
.1.........
...........
...........
...........
The Historian can't wait much longer, so you don't have to simulate the robots for very long. Where will the robots be after 100 seconds?

In the above example, the number of robots on each tile after 100 seconds has elapsed looks like this:

......2..1.
...........
1..........
.11........
.....1.....
...12......
.1....1....
To determine the safest area, count the number of robots in each quadrant after 100 seconds. Robots that are exactly in the middle (horizontally or vertically) don't count as being in any quadrant, so the only relevant robots are:

..... 2..1.
..... .....
1.... .....
           
..... .....
...12 .....
.1... 1....
In this example, the quadrants contain 1, 3, 4, and 1 robot. Multiplying these together gives a total safety factor of 12.

Predict the motion of the robots in your list within a space which is 101 tiles wide and 103 tiles tall. What will the safety factor be after exactly 100 seconds have elapsed?

--- Part Two ---
During the bathroom break, someone notices that these robots seem awfully similar to ones built and used at the North Pole. If they're the same type of robots, they should have a hard-coded Easter egg: very rarely, most of the robots should arrange themselves into a picture of a Christmas tree.
What is the fewest number of seconds that must elapse for the robots to display the Easter egg?

----------------------------------------------
--- 14日目：トイレの要塞 ---
歴史家の1人がトイレに行きたがっています。幸いにも、彼らのリストにある未訪問の場所の近くにトイレがあることをあなたは知っており、皆はすぐにイースターバニー本部ロビーにテレポートしました。
残念ながら、EBHQは、あなたの最後の訪問後に再びトイレのセキュリティを「改善」したようです。トイレの外のエリアはロボットでいっぱいです！
ヒストリアンを安全にトイレまで連れて行くには、ロボットが将来どこに移動するかを予測する方法が必要です。幸いにも、それらのロボットはすべてタイル張りの床の上を予測可能な直線で移動しているようです。
ロボットの現在の位置（p）と速度（v）をすべてリスト（パズルの入力）にします。1行につき1体のロボットです。例えば：p=0,4 v=3,-3
p=6,3 v=-1,-3
p=10,3 v=-1,2
p=2,0 v=2,-1
p=0,0 v=1,3
p=3,0 v=-2,-2
p=7,6 v=-1,-3
p=3,0 v=-1,-2
p=9,3 v=2,3
p=7,3 v=-1,2
p=2,4 v=2,-3
p=9,5 v=-3,-3
各ロボットの位置は、
p=x,y
 のように表されます。ここで、
x
 はロボットが左の壁から何タイル目にあるかを表し、
y
 は上部の壁から何タイル目にあるかを表します（上から見た場合）。つまり、
p=0,0
 の位置はロボットが左上の角に位置していることを意味します。
各ロボットの速度は、v=x,y として与えられ、xとyはタイル毎秒で与えられる。xが正の場合、ロボットは右方向に移動し、yが正の場合、ロボットは下方向に移動する。つまり、v=1,-2の速度は、1秒ごとにロボットが1タイル分右に移動し、2タイル分上方向に移動することを意味する。
実際の浴室の外にいるロボットは、101タイル分の幅と103タイル分の高さ（上から見た場合）の空間内にいます。しかし、この例ではロボットがいる空間は幅が11タイル分、高さが7タイル分しかありません。
ロボットは、互いに上や下を移動するのに長けています（バネ、伸縮する脚、クアッドコプターの組み合わせにより）。そのため、同じタイルを共有しても互いに干渉することはありません。この例では、各タイル上のロボットの数は視覚的には次のようになります。
1.12............
......
......
11.11
1.1............
1.......
1...
これらのロボットには、バスルームのセキュリティを最大限に確保するためのユニークな機能があります。それは、テレポート機能です。ロボットが現在いる空間の端にぶつかりそうになると、代わりにテレポートして反対側に移動し、効果的に端を回避します。ロボットp=2,4 v=2,-3が最初の数秒間に行ったことは次の通りです。
初期状態：................
................
................
................
................
................
................

1秒後：................
...1.................
...........
...........
...........
...........
...........

2秒後:...........
...........
...........
...........
...........
...........
......
1...............

3秒後:...........
...........
........
1.............
...........
...........
...........

4秒後:...........
...........
...........
...........
...........
...........
..........
1

5秒後:...........
...........
...........
.
1....................
......

ヒストリアンはそれ以上待てませんので、ロボットのシミュレーションを長く行う必要はありません。100秒後、ロボットはどこにいるでしょうか？
上記の例では、100秒経過後の各タイル上のロボットの数は次のようになります。...
2..1............
1...........
11.............
1........
12.......
1....1....
最も安全なエリアを決定するには、100秒後に各象限に存在するロボットの数を数えます。 ロボットが水平または垂直方向に真ん中に位置している場合は、どの象限にも含まれないと見なされるため、関連するロボットは次の通りです。...
 2..1....
1....
           ...
...
12...
1...
この例では、各象限には1台、3台、4台、1台のロボットが存在します。これらを掛け合わせると、合計の安全係数は12になります。
101
タイルの幅と
103
タイルの高さの空間内にあるリスト内のロボットの動きを予測します。正確に100秒が経過した後の安全係数は何になるでしょうか？

--- パート2 ---
トイレ休憩中に、誰かがこれらのロボットが北極で製造され使用されているロボットに酷似していることに気づく。もし同じ種類のロボットであれば、ハードコードされたイースターエッグが仕込まれているはずである。ごくまれに、ほとんどのロボットがクリスマスツリーの絵の形に整列するはずだ。
ロボットがイースターエッグを表示するまでに経過しなければならない最短の秒数は何秒だろうか？